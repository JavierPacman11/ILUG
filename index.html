<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Para Geraldine, con Todo Mi Amor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Parisienne&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Sacramento&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Estilos para el fondo de texto en cascada (Matrix) */
      #matrix-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -2;
        opacity: 0.25;
      }

      body {
        font-family: "Playfair Display", serif;
        color: #333;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        min-height: 100vh;
        margin: 0;
        background-color: #fdf0f5;
        overflow-x: hidden;
        padding-top: 2rem;
        padding-bottom: 2rem;
      }

      .content-wrapper {
        position: relative;
        text-align: center;
        padding: 20px;
        background-color: rgba(255, 255, 255, 0.85);
        border-radius: 20px;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        margin-top: 20px;
        max-width: 95%;
        width: 800px;
      }

      #heart-canvas-container {
        position: relative;
        width: 100%;
        max-width: 500px; /* Este es el ancho de referencia para el coraz√≥n */
        height: 450px;
        margin: 10px auto;
      }

      #heart-canvas {
        width: 100%;
        height: 100%;
        display: block;
      }

      .messages-container {
        margin-top: 15px;
      }

      .main-message h1 {
        font-family: "Parisienne", cursive;
        font-size: clamp(2.5rem, 6vw, 3.8rem);
        color: #e91e63;
        margin-bottom: 8px;
      }

      .main-message p {
        font-size: clamp(1rem, 3vw, 1.4rem);
        color: #5c5c5c;
        margin-bottom: 20px;
      }

      #typed-code-container {
        background-color: #282c34;
        color: #abb2bf;
        padding: 20px;
        border-radius: 10px;
        font-family: "Courier New", Courier, monospace;
        text-align: left;
        margin: 25px auto;
        max-width: 600px;
        font-size: clamp(0.8rem, 2.5vw, 1rem);
        white-space: pre-wrap;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        border: 1px solid #3c4048;
      }

      #typed-code-container .keyword {
        color: #c678dd;
        font-weight: bold;
      }
      #typed-code-container .string {
        color: #98c379;
      }
      #typed-code-container .comments {
        color: #5c6370;
        font-style: italic;
      }
      #typed-code-container .variable {
        color: #61afef;
      }
      #typed-code-container .function {
        color: #e5c07b;
      }
      #typed-code-container .operator {
        color: #d19a66;
      }
      #typed-code-container .value {
        color: #e06c75;
      }

      .additional-message {
        font-family: "Sacramento", cursive;
        font-size: clamp(2rem, 5vw, 2.8rem);
        color: #ff7eb9;
        margin-top: 25px;
        line-height: 1.3;
      }

      .reveal-button {
        background-image: linear-gradient(to right, #ff7eb9, #e91e63);
        color: white;
        padding: 12px 28px;
        border: none;
        border-radius: 30px;
        font-size: clamp(0.9rem, 2.8vw, 1.1rem);
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(233, 30, 99, 0.4);
        margin-top: 20px;
        /* display: none;  El bot√≥n se oculta inicialmente con JS */
      }
      .reveal-button:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 8px 20px rgba(233, 30, 99, 0.5);
      }
      .reveal-button:active {
        transform: translateY(-1px) scale(1.02);
      }

      .hidden-message {
        display: none;
        margin-top: 25px;
        padding: 20px;
        background-color: #fffde7;
        border-radius: 10px;
        border: 2px dashed #e91e63;
        color: #795548;
        font-size: clamp(0.9rem, 2.8vw, 1.1rem);
        line-height: 1.6;
      }

      #musicButton {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
        background-color: #e91e63;
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        z-index: 1000;
        border: none;
        font-size: 20px;
      }
      #musicButton:hover {
        transform: scale(1.1);
        background-color: #ff4081;
      }

      .image-card {
        width: 280px;
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s;
        margin: 15px;
      }
      .image-card:hover {
        transform: translateY(-5px);
      }
      .gallery-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 25px;
        padding: 0 20px;
        margin: 40px 0;
      }
      .gallery-title {
        text-align: center;
        font-family: "Sacramento", cursive;
        font-size: 2.5rem;
        color: #e91e63;
        margin-bottom: 30px;
      }
    </style>
  </head>
  <body class="bg-pink-50">
    <!-- Audio (oculto, comienza en pausa) -->
    <audio id="backgroundMusic" loop>
      <source
        src="media/Ed Maverick - arco√≠ris (Letra).mp3"
        type="audio/mpeg"
      />
      Tu navegador no soporta audio HTML5.
    </audio>

    <!-- Bot√≥n flotante de m√∫sica -->
    <button id="musicButton" title="Reproducir m√∫sica">üéµ</button>

    <!-- Canvas para el fondo de texto en cascada -->
    <canvas id="matrix-canvas"></canvas>

    <!-- Contenedor principal del contenido -->
    <div class="content-wrapper">
      <div class="main-message">
        <h1>Para Mi Adorada Geraldine</h1>
        <p>Con todo mi cari√±o, he preparado esto para ti.</p>
      </div>

      <!-- Contenedor del coraz√≥n de part√≠culas -->
      <div id="heart-canvas-container">
        <canvas id="heart-canvas"></canvas>
      </div>

      <!-- Contenedor de los mensajes -->
      <div class="messages-container">
        <!-- Contenedor para el texto que se teclea -->
        <div id="typed-code-container">
          <!-- El contenido se generar√° con JavaScript -->
        </div>

        <p class="additional-message">
          "Eres la melod√≠a que mi coraz√≥n no deja de susurrar..."
        </p>

        <!-- Bot√≥n para revelar mensaje especial -->
        <button id="revealLoveButton" class="reveal-button">
          Presiona Aqu√≠...
        </button>
        <!-- Mensaje especial oculto -->
        <div id="specialMessage" class="hidden-message">
          Geraldine, mi amor,<br /><br />
          Desde el instante en que apareciste en mi vida, todo se llen√≥ de
          colores vibrantes y melod√≠as dulces. Tu sonrisa es el faro que gu√≠a
          mis d√≠as, y tu ternura, el refugio donde mi coraz√≥n encuentra paz.
          Cada momento contigo es un tesoro invaluable, un sue√±o del que no
          quiero despertar.
          <br /><br />Quiero que sepas que eres incre√≠blemente especial para m√≠.

          <!-- Video en formato 9:16 centrado -->
          <div style="display: flex; justify-content: center; margin: 20px 0">
            <div
              style="
                width: 100%;
                max-width: 400px;
                height: 225px;
                overflow: hidden;
                border-radius: 15px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
              "
            >
              <video
                autoplay
                muted
                loop
                style="width: 100%; height: 100%; object-fit: cover"
              >
                <source src="media/2025-05-25-192446199.mp4" type="video/mp4" />
                Tu navegador no soporta videos HTML5.
              </video>
            </div>
          </div>

          <!-- Contador preciso -->
          <div
            id="timeCounter"
            style="
              margin: 20px 0;
              text-align: center;
              font-size: 1.1em;
              color: #ff6b6b;
              background: rgba(255, 255, 255, 0.7);
              padding: 10px;
              border-radius: 10px;
              max-width: 300px;
              margin-left: auto;
              margin-right: auto;
            "
          >
            Nuestro tiempo juntos:<br />
            <span id="days">0</span> d√≠as, <span id="hours">0</span> horas,
            <span id="minutes">0</span> minutos,
            <span id="seconds">0</span> segundos
          </div>

          <!-- Galer√≠a de im√°genes con frases -->
          <h2 class="gallery-title">Momentos que atesoro</h2>

          <div class="gallery-container">
            <!-- Imagen 1 -->
            <div class="image-card">
              <img
                src="media/1.jpg"
                alt="Amor"
                style="width: 100%; height: 200px; object-fit: cover"
              />
              <div style="padding: 15px; text-align: center">
                <h3
                  style="
                    font-family: 'Playfair Display', serif;
                    color: #e91e63;
                    margin: 10px 0;
                  "
                >
                  "Tu sonrisa ilumina mi universo"
                </h3>
                <p style="color: #666; font-style: italic">
                  Eres mi luz en los d√≠as oscuros
                </p>
              </div>
            </div>

            <!-- Imagen 2 -->
            <div class="image-card">
              <img
                src="media/2.png"
                alt="Amor"
                style="width: 100%; height: 200px; object-fit: cover"
              />
              <div style="padding: 15px; text-align: center">
                <h3
                  style="
                    font-family: 'Playfair Display', serif;
                    color: #e91e63;
                    margin: 10px 0;
                  "
                >
                  "Contigo el tiempo vuela"
                </h3>
                <p style="color: #666; font-style: italic">
                  Cada segundo a tu lado es un regalo
                </p>
              </div>
            </div>

            <!-- Imagen 3 -->
            <div class="image-card">
              <img
                src="media/3.jpg"
                alt="Amor"
                style="width: 100%; height: 200px; object-fit: cover"
              />
              <div style="padding: 15px; text-align: center">
                <h3
                  style="
                    font-family: 'Playfair Display', serif;
                    color: #e91e63;
                    margin: 10px 0;
                  "
                >
                  "Eres mi lugar seguro"
                </h3>
                <p style="color: #666; font-style: italic">
                  En tus brazos encuentro mi paz
                </p>
              </div>
            </div>

            <!-- Imagen 4 -->
            <div class="image-card">
              <img
                src="media/4.jpeg"
                alt="Amor"
                style="width: 100%; height: 200px; object-fit: cover"
              />
              <div style="padding: 15px; text-align: center">
                <h3
                  style="
                    font-family: 'Playfair Display', serif;
                    color: #e91e63;
                    margin: 10px 0;
                  "
                >
                  "Nuestro amor es √∫nico"
                </h3>
                <p style="color: #666; font-style: italic">
                  Como un cuadro pintado por el destino
                </p>
              </div>
            </div>
          </div>

          <!-- Imagen a√±adida debajo del contador -->
          <div style="display: flex; justify-content: center; margin: 40px 0">
            <img
              src="media/pngwing.com (1).png"
              alt="Nuestra foto"
              style="max-width: 90%; height: auto"
            />
          </div>

          <br /><br />Con todo mi amor,<br />
          Tu Javi ‚ù§Ô∏è
        </div>
      </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-1.4.2.min.js"></script>

    <script>
      // Configura la fecha de inicio (A√ëO, MES-1, D√çA, HORA, MINUTO, SEGUNDO)
      const startDate = new Date(2025, 5, 8, 0, 0, 0); // Junio es mes 5 (0-indexado)

      function updateTimeCounter() {
        const now = new Date();
        const diff = now - startDate;

        if (diff < 0) {
          // Si la fecha de inicio es en el futuro
          document.getElementById("days").textContent = 0;
          document.getElementById("hours").textContent = 0;
          document.getElementById("minutes").textContent = 0;
          document.getElementById("seconds").textContent = 0;
          return;
        }

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor(
          (diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
        );
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);

        document.getElementById("days").textContent = days;
        document.getElementById("hours").textContent = hours;
        document.getElementById("minutes").textContent = minutes;
        document.getElementById("seconds").textContent = seconds;
      }

      updateTimeCounter();
      setInterval(updateTimeCounter, 1000);

      const backgroundMusic = document.getElementById("backgroundMusic");
      const musicButton = document.getElementById("musicButton");
      let isMusicPlaying = false;

      if (backgroundMusic && musicButton) {
        backgroundMusic.pause();
        musicButton.addEventListener("click", function () {
          if (isMusicPlaying) {
            backgroundMusic.pause();
            musicButton.textContent = "üéµ";
            musicButton.title = "Reproducir m√∫sica";
          } else {
            backgroundMusic
              .play()
              .then(() => {
                musicButton.textContent = "üîä";
                musicButton.title = "Pausar m√∫sica";
              })
              .catch((error) => {
                console.error("Error al reproducir m√∫sica:", error);
                // No mostrar alert, solo loguear o manejar sutilmente
              });
          }
          isMusicPlaying = !isMusicPlaying;
        });

        document.body.addEventListener(
          "click",
          function enableAudio() {
            // Darle un nombre a la funci√≥n para removerla si es necesario
            if (backgroundMusic.paused && !isMusicPlaying) {
              // Solo intentar si est√° pausada y no se supone que est√© sonando
              backgroundMusic
                .play()
                .then(() => {
                  backgroundMusic.pause();
                }) // Intenta y pausa para "desbloquear"
                .catch((e) => {});
            }
          },
          { once: true }
        );
      }

      const matrixCanvas = document.getElementById("matrix-canvas");
      const matrixCtx = matrixCanvas.getContext("2d");

      matrixCanvas.height = window.innerHeight;
      matrixCanvas.width = window.innerWidth;
      let matrixTexts = "GERALDINE <3 AMOR TI AMO".split("");
      matrixTexts = matrixTexts
        .concat(Array(10).fill("‚ù§"))
        .concat(Array(10).fill("‚ú®"));
      const matrixFontSize = 12;
      let matrixColumns = matrixCanvas.width / matrixFontSize;
      let matrixDrops = [];
      for (let x = 0; x < matrixColumns; x++) matrixDrops[x] = 1;

      function drawMatrix() {
        matrixCtx.fillStyle = "rgba(253, 240, 245, 0.1)";
        matrixCtx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);
        matrixCtx.fillStyle = "rgba(233, 30, 99, 0.6)";
        matrixCtx.font = matrixFontSize + "px monospace";
        for (let i = 0; i < matrixDrops.length; i++) {
          const text =
            matrixTexts[Math.floor(Math.random() * matrixTexts.length)];
          matrixCtx.fillText(
            text,
            i * matrixFontSize,
            matrixDrops[i] * matrixFontSize
          );
          if (
            matrixDrops[i] * matrixFontSize > matrixCanvas.height &&
            Math.random() > 0.975
          )
            matrixDrops[i] = 0;
          matrixDrops[i]++;
        }
      }
      let matrixInterval = setInterval(drawMatrix, 60);

      window.addEventListener("resize", () => {
        matrixCanvas.height = window.innerHeight;
        matrixCanvas.width = window.innerWidth;
        matrixColumns = matrixCanvas.width / matrixFontSize;
        matrixDrops = [];
        for (let x = 0; x < matrixColumns; x++) matrixDrops[x] = 1;
        if (matrixInterval) clearInterval(matrixInterval);
        drawMatrix();
        matrixInterval = setInterval(drawMatrix, 60);
      });

      // --- Script para el coraz√≥n de part√≠culas ---
      const heartCanvas = document.getElementById("heart-canvas");
      const heartCtx = heartCanvas.getContext("2d");

      const heartSettings = {
        particles: {
          length: 700,
          duration: 2.5,
          velocity: 90,
          effect: -0.8,
          size: 12,
        },
      };

      (function () {
        var b = 0,
          c = ["ms", "moz", "webkit", "o"];
        for (var a = 0; a < c.length && !window.requestAnimationFrame; ++a) {
          window.requestAnimationFrame = window[c[a] + "RequestAnimationFrame"];
          window.cancelAnimationFrame =
            window[c[a] + "CancelAnimationFrame"] ||
            window[c[a] + "CancelRequestAnimationFrame"];
        }
        if (!window.requestAnimationFrame)
          window.requestAnimationFrame = function (h, e) {
            var d = new Date().getTime(),
              f = Math.max(0, 16 - (d - b)),
              g = window.setTimeout(function () {
                h(d + f);
              }, f);
            b = d + f;
            return g;
          };
        if (!window.cancelAnimationFrame)
          window.cancelAnimationFrame = function (d) {
            clearTimeout(d);
          };
      })();

      var Point = (function () {
        function Point(x, y) {
          this.x = x || 0;
          this.y = y || 0;
        }
        Point.prototype.clone = function () {
          return new Point(this.x, this.y);
        };
        Point.prototype.length = function (length) {
          if (typeof length == "undefined")
            return Math.sqrt(this.x * this.x + this.y * this.y);
          this.normalize();
          this.x *= length;
          this.y *= length;
          return this;
        };
        Point.prototype.normalize = function () {
          var length = this.length();
          if (length === 0) {
            this.x = 0;
            this.y = 0;
          } else {
            this.x /= length;
            this.y /= length;
          }
          return this;
        };
        return Point;
      })();

      var Particle = (function () {
        function Particle() {
          this.position = new Point();
          this.velocity = new Point();
          this.acceleration = new Point();
          this.age = 0;
        }
        Particle.prototype.initialize = function (x, y, dx, dy) {
          this.position.x = x;
          this.position.y = y;
          this.velocity.x = dx;
          this.velocity.y = dy;
          this.acceleration.x = dx * heartSettings.particles.effect;
          this.acceleration.y = dy * heartSettings.particles.effect;
          this.age = 0;
        };
        Particle.prototype.update = function (deltaTime) {
          this.position.x += this.velocity.x * deltaTime;
          this.position.y += this.velocity.y * deltaTime;
          this.velocity.x += this.acceleration.x * deltaTime;
          this.velocity.y += this.acceleration.y * deltaTime;
          this.age += deltaTime;
        };
        Particle.prototype.draw = function (
          context,
          image,
          currentScaleFactor
        ) {
          function ease(t) {
            return --t * t * t + 1;
          }
          var ageFactor = Math.max(
            0,
            1 - this.age / heartSettings.particles.duration
          );
          var scaledBaseParticleSize = image.width * currentScaleFactor; // Escalar el tama√±o base de la part√≠cula
          var size = scaledBaseParticleSize * ease(ageFactor);
          context.globalAlpha = Math.max(
            0,
            1 - this.age / heartSettings.particles.duration
          );
          if (size > 0.1) {
            // Solo dibujar si el tama√±o es visible
            context.drawImage(
              image,
              this.position.x - size / 2,
              this.position.y - size / 2,
              size,
              size
            );
          }
        };
        return Particle;
      })();

      var ParticlePool = (function () {
        var particles,
          firstActive = 0,
          firstFree = 0,
          duration = heartSettings.particles.duration;
        function ParticlePool(length) {
          particles = new Array(length);
          for (var i = 0; i < particles.length; i++)
            particles[i] = new Particle();
        }
        ParticlePool.prototype.add = function (x, y, dx, dy) {
          particles[firstFree].initialize(x, y, dx, dy);
          firstFree++;
          if (firstFree == particles.length) firstFree = 0;
          if (firstActive == firstFree) firstActive++;
          if (firstActive == particles.length) firstActive = 0;
        };
        ParticlePool.prototype.update = function (deltaTime) {
          var i;
          if (firstActive < firstFree) {
            for (i = firstActive; i < firstFree; i++)
              particles[i].update(deltaTime);
          }
          if (firstFree < firstActive) {
            for (i = firstActive; i < particles.length; i++)
              particles[i].update(deltaTime);
            for (i = 0; i < firstFree; i++) particles[i].update(deltaTime);
          }
          while (
            particles[firstActive].age >= duration &&
            firstActive != firstFree
          ) {
            firstActive++;
            if (firstActive == particles.length) firstActive = 0;
          }
        };
        ParticlePool.prototype.draw = function (
          context,
          image,
          currentScaleFactor
        ) {
          var i;
          if (firstActive < firstFree) {
            for (i = firstActive; i < firstFree; i++)
              particles[i].draw(context, image, currentScaleFactor);
          }
          if (firstFree < firstActive) {
            for (i = firstActive; i < particles.length; i++)
              particles[i].draw(context, image, currentScaleFactor);
            for (i = 0; i < firstFree; i++)
              particles[i].draw(context, image, currentScaleFactor);
          }
        };
        return ParticlePool;
      })();

      (function (canvas) {
        // Heart Animation IIFE
        if (!canvas) {
          console.error("El canvas del coraz√≥n no fue encontrado.");
          return;
        }
        var context = canvas.getContext("2d");
        if (!context) {
          console.error(
            "No se pudo obtener el contexto 2D para el canvas del coraz√≥n."
          );
          return;
        }

        var particles = new ParticlePool(heartSettings.particles.length);
        var particleRate =
          heartSettings.particles.length / heartSettings.particles.duration;
        var time;

        function pointOnHeart(t) {
          return new Point(
            160 * Math.pow(Math.sin(t), 3),
            130 * Math.cos(t) -
              50 * Math.cos(2 * t) -
              20 * Math.cos(3 * t) -
              10 * Math.cos(4 * t) +
              25
          );
        }

        var image = (function () {
          var imgCanvas = document.createElement("canvas"),
            imgContext = imgCanvas.getContext("2d");
          imgCanvas.width = heartSettings.particles.size;
          imgCanvas.height = heartSettings.particles.size;
          function to(t) {
            var point = pointOnHeart(t);
            point.x =
              heartSettings.particles.size / 2 +
              (point.x * heartSettings.particles.size) / 350;
            point.y =
              heartSettings.particles.size / 2 -
              (point.y * heartSettings.particles.size) / 350;
            return point;
          }
          imgContext.beginPath();
          var t = -Math.PI;
          var currentPoint = to(t);
          imgContext.moveTo(currentPoint.x, currentPoint.y);
          while (t < Math.PI) {
            t += 0.01;
            currentPoint = to(t);
            imgContext.lineTo(currentPoint.x, currentPoint.y);
          }
          imgContext.closePath();
          imgContext.fillStyle = "#e91e63";
          imgContext.fill();
          var image = new Image();
          image.src = imgCanvas.toDataURL();
          return image;
        })();

        function renderHeart() {
          requestAnimationFrame(renderHeart);
          var newTime = new Date().getTime() / 1000,
            deltaTime = newTime - (time || newTime);
          time = newTime;
          context.clearRect(0, 0, canvas.width, canvas.height);

          const referenceWidth = 500; // Ancho de referencia (CSS max-width de heart-canvas-container)
          let scaleFactor = canvas.width / referenceWidth;
          scaleFactor = Math.min(1.0, scaleFactor); // No escalar m√°s grande que el original
          scaleFactor = Math.max(0.4, scaleFactor); // Escala m√≠nima para pantallas muy peque√±as

          var amount = particleRate * deltaTime;
          for (var i = 0; i < amount; i++) {
            var posUnscaled = pointOnHeart(
              Math.PI - 2 * Math.PI * Math.random()
            );
            var scaledX = posUnscaled.x * scaleFactor;
            var scaledY = posUnscaled.y * scaleFactor;
            var dir = posUnscaled
              .clone()
              .normalize()
              .length(heartSettings.particles.velocity);
            var scaledDirX = dir.x * scaleFactor; // Escalar tambi√©n la velocidad
            var scaledDirY = dir.y * scaleFactor;
            particles.add(
              canvas.width / 2 + scaledX,
              canvas.height / 2 - scaledY,
              scaledDirX,
              -scaledDirY
            );
          }
          particles.update(deltaTime);
          particles.draw(context, image, scaleFactor); // Pasar scaleFactor para dibujar part√≠culas
        }

        function onResizeHeart() {
          const container = document.getElementById("heart-canvas-container");
          if (container) {
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
          } else {
            canvas.width = Math.min(window.innerWidth * 0.8, 500);
            canvas.height = 450;
          }
        }
        window.addEventListener("resize", onResizeHeart);
        setTimeout(function () {
          onResizeHeart();
          renderHeart();
        }, 100);
      })(heartCanvas);

      // --- Script para el efecto de tecleo (Typewriter) ---
      (function ($) {
        $.fn.typewriter = function (callback) {
          // A√±adir par√°metro callback
          this.each(function () {
            var d = $(this),
              c = d.html(),
              b = 0;
            d.html(""); // Limpiar contenido para empezar a teclear
            var e = setInterval(function () {
              var f = c.substr(b, 1);
              if (f == "<") {
                b = c.indexOf(">", b) + 1;
              } else {
                b++;
              }
              d.html(c.substring(0, b) + (b & 1 ? "_" : ""));
              if (b >= c.length) {
                clearInterval(e);
                d.html(c.substring(0, b)); // Mostrar texto final sin cursor
                if (typeof callback === "function") {
                  callback(); // Llamar al callback cuando termine
                }
              }
            }, 100);
          });
          return this;
        };
      })(jQuery);

      $(document).ready(function () {
        const codeContent = `
<span class="comments">// Para Geraldine, la inspiraci√≥n de mi c√≥digo y mi vida.</span>
<span class="keyword">const</span> <span class="variable">miAmorPorTi</span> <span class="operator">=</span> {
  <span class="string">nombre</span>: <span class="value">"Geraldine"</span>,
  <span class="string">sentimiento</span>: <span class="value">"Amor Infinito ‚ú®"</span>,
  <span class="string">cualidades</span>: [
    <span class="value">"Tu sonrisa que ilumina mi universo,"</span>,
    <span class="value">"Tu bondad que abraza el alma,"</span>,
    <span class="value">"Cada instante m√°gico a tu lado."</span>
  ],
  <span class="function">declaracion</span>: <span class="keyword">function</span>() {
    <span class="keyword">return</span> \`<span class="value">Geraldine, eres mi todo. ¬°Te Amo!</span>\`;
  }
};
<span class="comments">// Cada d√≠a, este sentimiento crece m√°s y m√°s.</span>
<span class="keyword">function</span> <span class="function">nuestroFuturo</span>(<span class="variable">tiempo</span>) {
  <span class="keyword">if</span> (<span class="variable">tiempo</span> <span class="operator">===</span> <span class="value">"siempre"</span>) {
    <span class="keyword">return</span> <span class="value">"Felicidad Eterna Juntos üíñ"</span>;
  }
}
<span class="comments">// console.log(miAmorPorTi.declaracion());</span>
<span class="comments">// console.log(nuestroFuturo("siempre"));</span>`;

        // Ocultar el bot√≥n inicialmente
        $("#revealLoveButton").hide();

        setTimeout(function () {
          if ($("#typed-code-container").length) {
            $("#typed-code-container")
              .html(codeContent)
              .typewriter(function () {
                // Callback: se ejecuta cuando el typewriter termina
                $("#revealLoveButton").fadeIn(1000); // Mostrar el bot√≥n con un fade
              });
          }
        }, 1500);

        $("#revealLoveButton").click(function () {
          const specialMessage = $("#specialMessage");
          if (specialMessage.length) {
            specialMessage.slideDown(1000);
            $(this).fadeOut(500);
          }
        });
      });
    </script>
  </body>
</html>
